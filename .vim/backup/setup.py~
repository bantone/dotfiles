try:
    from setuptools import setup, find_packages
except ImportError:
    from ez_setup import use_setuptools
    use_setuptools()
    from setuptools import setup, find_packages



def read(relative):
    """Read file contents and return a list of lines.
    ie, read the VERSION file"""
    contents = open(relative, 'r').read()
    return [l for l in contents.split('\n') if l != '']


NAME = 'ecr_config'

setup(name=NAME,
      version=read('./VERSION')[0],
      description='Elastic Cloud Router Configuration',
      author='Rubicon',
      author_email='autobots@emc.com',
      packages=find_packages(exclude=['tests']),
      entry_points=dict(console_scripts=[
          'ecr-config={0}.cli.main:main'.format(NAME),
          'ecr-config-expand-base-partition-table={0}.cli.expand_base_partition_table:main'.format(NAME),
          'ecr-config-generate-base-partition-table={0}.cli.generate_base_partition_table:main'.format(NAME),
          'ecr-config-generate-credentials={0}.cli.generate_credentials:main'.format(NAME),
          'ecr-config-write-from-consul={0}.cli.write_from_consul:main'.format(NAME),
          'ecr-config-save-to-consul={0}.cli.save_to_consul:main'.format(NAME),
          'ecr-config-update-serial={0}.cli.update_serial_in_consul:main'.format(NAME),
          'gen-free-metering={0}.cli.gen_free_metering:main'.format(NAME),
      ]),
      test_suite='nose.collector',
      tests_require=read('./test-requirements.txt'),
      install_requires=read('./requirements.txt'),
      include_package_data=True,
      dependency_links=['https://pypi.core.rcsops.com/rcsops/rcsops/+simple/atmosadmin'],
      zip_safe=False,
      )
